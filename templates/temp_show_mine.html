{% extends "layout.html" %}

<!-- section -->
{% block section %}

<section>
    <aside>
        <h4> My friends'</h4>
        <h5> Wish List </h5>
        <button type="button" class="btn btn-light">Add friend</button>
        <button type="button" class="btn btn-light">Delete friend</button>
        <!--                ìœ„ì˜ ë‘ ë²„íŠ¼ ì•ˆìª½ ê¸€ì”¨ í¬ê¸°ë¥¼ ë°”ê¾¸ê³  ì‹¶ì€ë° ì˜ ì•ˆë©ë‹ˆë‹¤..ã… ã… -->
        <a href="" class="name_list">- ì„ë„í˜• -</a>
        <a href="" class="name_list">- ìµœì˜ˆëŒ -</a>
        <a href="" class="name_list">- ìµœì•„ì˜ -</a>
        <!--                ì—¬ê¸°ì— dbì—ì„œ ê°€ì ¸ì˜¨ ì¹œêµ¬ ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ë ¤ê³  í•©ë‹ˆë‹¤..!-->
    </aside>
    <article class="bg">
        <div class="title-area">
            <h1>My Wish List</h1>
        </div>
        <div class="button_area">
            <h6>wish list </h6>
            <button onclick="add_list()" id="add_button" type="button" class="btn btn-outline-light">ì¶”ê°€</button>
            <button onclick="delete_list()" id="delete_button" type="button" class="btn btn-outline-light">ì‚­ì œ</button>
        </div>
        <div class="subtitle-area">
            <h1> ë‹¹ì‹ ì˜ ìœ„ì‹œë¦¬ìŠ¤íŠ¸ëŠ” ì–¼ë§ˆë‚˜ ì±„ì›Œì ¸ìˆë‚˜ìš”? </h1>
            <h1> ì†Œì¤‘í•œ ì‚¬ëŒë“¤ì´ ë°”ë¬ë˜ ì„ ë¬¼ì„ í•´ë³´ì„¸ìš”.</h1>
        </div>
        <div id="post-box-area" class="form-post" style="display:none">
            <p class="post-box-title">Add Object</p>
            <p class="post-box-subtitle">ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì— ì œí’ˆì„ ì¶”ê°€í•´ë³´ì„¸ìš”.</p>
            <div class="form-group">
                <label for="post-name">ì œí’ˆ ì´ë¦„</label> <input id="post-name" class="form-control">
            </div>
            <div class="form-group">
                <label for="post-price">ì œí’ˆ ê°€ê²©</label> <input id="post-price" class="form-control">
            </div>
            <div class="form-group">
                <label for="post-rank">ì œí’ˆ ë­í¬</label>
                <select id="post-rank" class="form-control">
                    <option value="0">ë³„ ì—†ìŒ! -ì¼ë‹¨ ë‹´ì•„ë³´ê¸´ í–ˆë‹¤-</option>
                    <option value="0.5">ë³„ ë°˜! -ê·¸ëƒ¥ ê·¸ë˜-</option>
                    <option value="1">ë³„ í•˜ë‚˜! -ëˆˆì— ì¡°ê¸ˆ ë„ë„¤-</option>
                    <option value="1.5">ë³„ í•˜ë‚˜ë°˜! -ìˆìœ¼ë©´ ì¢‹ê¸´ í•˜ê² ë‹¤-</option>
                    <option value="2">ë³„ ë‘˜! -ì‚¬ê¸´ ì‹«ì§€ë§Œ ë°›ê³  ì‹¶ë‹¤-</option>
                    <option value="2.5">ë³„ ë‘˜ë°˜! -ì•„ ì´ê±° ì• ë§¤í•˜ë‹¤-</option>
                    <option value="3">ë³„ ì…‹! -ì˜¤ ì´ê±° ë‚´ ìŠ¤íƒ€ì¼-</option>
                    <option value="3.5">ë³„ ì…‹ë°˜! -ëˆëª¨ìœ¼ë©´ ì‚¬ì•¼ì§€-</option>
                    <option value="4">ë³„ ë„·! -ì§€ê¸ˆì‚´ì§€ ëˆëª¨ìœ¼ê³ ì‚´ì§€ ê³ ë¯¼ì¤‘-</option>
                    <option value="4.5">ë³„ ë„·ë°˜! -ëˆì•ˆëª¨ì—¬ë„ ì´ê±´ ì‚¬ì•¼ë¼-</option>
                    <option value="5">ë³„ ë‹¤ì„¯! -ì§€ê¸ˆ ì´ë¯¸ ê²°ì œì¤‘-</option>
                </select>
            </div>
            <div class="form-group">
                <label for="post-url">ì œí’ˆ URL</label>
                <input id="post-url" class="form-control" placeholder="">
            </div>
            <div class="form-group">
                <label for="post-comment">ê°„ë‹¨ ì½”ë©˜íŠ¸</label>
                <textarea id="post-comment" class="form-control" rows="2"></textarea>
            </div>
            <button id="add_list_button" type="button" class="btn btn-light" onclick="postList()">Add</button>
        </div>
        <div id="delete-post-box-area" class="form-post" style="display:none">
            <p class="delete-post-box-title">Delete Object</p>
            <p class="delete-post-box-subtitle">ìœ„ì‹œë¦¬ìŠ¤íŠ¸ì˜ ì œí’ˆì„ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <div class="form-group">
                <label for="delete-post-name">ì œí’ˆ ì´ë¦„</label> <input id="delete-post-name" class="form-control">
            </div>
            <button id="delete_list_button" type="button" class="btn btn-light" onclick="removeList()">Delete</button>
        </div>
        <div id="card-area">
            <div class="card">
                <img src="../static/ex_candle.jpg" class="card-img-top" alt="...">
                <div class="card-body">
                    <a class="card-title">ì œí’ˆ ì´ë¦„</a>
                    <div class="rank">
                        <img class="star" src="../static/full-star.png" alt="">
                        <img class="star" src="../static/full-star.png" alt="">
                        <img class="star" src="../static/full-star.png" alt="">
                        <img class="star" src="../static/half-star.png" alt="">
                        <img class="star" src="../static/empty-star.png" alt="">
                    </div>
                    <p class="card-text">ì œí’ˆ ê°€ê²©</p>
                    <p class="card-text">ì œí’ˆ ì½”ë©˜íŠ¸</p>
                </div>
                <div class="card-body">
                    <button onclick="good_button()" type="button" class="btn btn-light">good</button>
                    <button onclick="bad_button()" type="button" class="btn btn-light">bad</button>
                </div>
            </div>
        </div>

    </article>
</section>

{% endblock %}

<!-- style -->
{% block style %}
<style>
    * {
        font-family: 'Noto Serif KR', serif;
    }

    section {
        height: calc(100vh - 64px);
        display: flex;
        flex-direction: row;

    }

    aside {
        width: 200px;
        background-color: rgb(19% 17% 20%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    aside h4 {
        font-family: 'Tangerine', cursive;
        font-size: 45px;
        color: honeydew;
    }

    aside h5 {
        font-family: 'Tangerine', cursive;
        font-size: 60px;
        color: honeydew;
        margin: 0 0 20px 0;
    }

    aside button {
        font-size: 6px !important;
        padding: 0 !important;
        margin: 10px 0 10px 0;
        width: 90px;
        height: 20px;
    }

    aside .name_list {
        margin: 10px 0 10px 0;
        color: honeydew;
    }

    aside .name_list:hover {
        margin: 10px 0 10px 0;
        color: peachpuff;
        text-decoration: none;
    }

    .bg {
        width: calc(100vw - 200px);
        height: calc(100vh - 64px);
        background-image: url("../static/mywishlist_bg.jpg");
        background-size: cover;
        background-position: right;
    }

    article {
        width: calc(100vw - 200px);
        overflow: auto;
    }

    article .title-area {
        height: 120px;
        font-family: 'Tangerine', cursive;
        display: flex;
        flex-direction: column;
        justify-content: right;
        align-items: flex-end;
        margin: 10% 5% 0 0;
    }

    article .title-area h1 {
        font-size: 150px;
        color: honeydew;
    }

    article .button_area {
        height: 70px;
        display: flex;
        flex-direction: row;
        justify-content: flex-end;
        align-items: center;
        margin: 1% 5% 0 0;
    }

    article .button_area h6 {
        color: lightgray;
        font-size: 15px;
        align-items: end;
        margin: 0 0.8% 0 0;
    }

    article .button_area button {
        color: lightgray;
        width: 45px;
        height: 25px;
        font-size: 10px;
        align-items: center;
        margin: 0 0.5% 0 0;
        padding: 0;
    }

    article .subtitle-area {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: flex-end;
        color: honeydew;
        margin: 3% 5% 5% 0;
    }

    article .subtitle-area h1 {
        font-size: 18px;
        margin: 0 0 1% 0;
    }

    article #card-area {
        display: grid;
        grid-template-columns: repeat(auto-fit, 200px);
        justify-content: space-evenly;
        margin: 13% 5% 10% 5%;
        gap: 50px 50px;
        grid-auto-rows: 500px;
    }

    article #card-area .card {
        width: 190px;
        height: 300px;
        background-color: white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    article #card-area .card .rank {
        justify-content: center;
        flex-direction: row;
        margin: 0 0 15% 0;
    }

    article #card-area .card .rank .star {
        width: 20px;
        height: 20px;
    }

    article #card-area .card .card-body {
        justify-content: center;
        align-items: center;
        margin: 0 0 0 0;
    }

    article #card-area .card .card-body .card-title {
        text-decoration: none;
        font-size: 20px;
        color: black;
        margin: 0 0 10% 0;
    }

    article #card-area .card .card-body .card-text {
        font-size: 13px;
        margin: 10% 0 0 0;
    }

    article #card-area .card .card-img-top {
        width: 190px;
        height: 190px;
        margin: 0;
    }

    article #post-box-area {
        width: 500px;
        margin: 20px auto;
        padding: 20px;
        /*border: transparent solid 1px;*/
        /*border: rgb(19% 17% 20%) solid 1px;*/
        border-radius: 5px;
        /*background: -webkit-linear-gradient( white, rgb(19% 17% 20%));*/
        /*background: -o-linear-gradient(white, rgb(19% 17% 20%));*/
        /*background: -moz-linear-gradient(white, rgb(19% 17% 20%));*/
        background: linear-gradient(rgb(19% 17% 20%), rgb(20% 20% 20%));
        /*background-color: rgb(19% 17% 20%);*/
        /*background-color: white;*/
        color: honeydew;
        /*color: rgb(19% 17% 20%);*/
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    article #post-box-area .form-group {
        width: 80%;
    }

    article #post-box-area .post-box-title {
        font-family: 'Tangerine', cursive;
        font-size: 80px;
    }

    article #post-box-area .post-box-subtitle {
        font-size: 13px;
        margin: -5% 0 10% 0;
    }

    article #post-box-area #post-rank {
        width: 100%;
        color: black;
    }

    article #post-box-area #add_list_button {
        height: 30px;
        padding: 4px 8px 8px 8px;
        font-family: 'Tangerine', cursive;
        font-weight: 700;
        font-size: 20px;
    }

    #post-box-area #post-comment {
        width: 100%;
        border-radius: 5px;
        margin: 0 0 8% 0;
    }

    article #delete-post-box-area {
        width: 500px;
        margin: 20px auto;
        padding: 20px;
        /*border: transparent solid 1px;*/
        /*border: rgb(19% 17% 20%) solid 1px;*/
        border-radius: 5px;
        /*background: -webkit-linear-gradient( white, rgb(19% 17% 20%));*/
        /*background: -o-linear-gradient(white, rgb(19% 17% 20%));*/
        /*background: -moz-linear-gradient(white, rgb(19% 17% 20%));*/
        background: linear-gradient(rgb(19% 17% 20%), rgb(20% 20% 20%));
        /*background-color: rgb(19% 17% 20%);*/
        /*background-color: white;*/
        color: honeydew;
        /*color: rgb(19% 17% 20%);*/
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    article #delete-post-box-area .delete-post-box-title {
        font-family: 'Tangerine', cursive;
        font-size: 80px;
    }

    article #delete-post-box-area .delete-post-box-subtitle {
        font-size: 13px;
        margin: -5% 0 10% 0;
    }

    article #delete-post-box-area #delete_list_button {
        height: 30px;
        padding: 4px 8px 8px 8px;
        font-family: 'Tangerine', cursive;
        font-weight: 700;
        font-size: 20px;
    }

</style>
{% endblock %}

<!-- script -->
{% block script %}
<script>
    $(document).ready(function () {
        // getUserNickname()
        let user = "{{ user['name'] }}"
        alert(`${user}ë‹˜ ë°˜ê°‘ìŠµë‹ˆë‹¤ ğŸ‘‹`)
        showList();
    });

    function signOut() {
        // ì¿ í‚¤ ì‚­ì œ
        let user = "{{ user['name'] }}"
        alert(`${user}ë‹˜ ì•ˆë…•íˆê°€ì„¸ìš” ğŸ‘‹`)
        $.removeCookie('token_give')
        location.href = '/login'
    }

    function add_list() {
        // id ê°’ post-boxì˜ display ê°’ì´ block ì´ë©´(= ëˆˆì— ë³´ì´ë©´)
        if ($("#post-box-area").css("display") == "flex") {
            // post-boxë¥¼ ê°€ë¦¬ê³ 
            $("#post-box-area").hide();
            // ë‹¤ì‹œ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´, ë°•ìŠ¤ ì—´ê¸°ë¥¼ í•  ìˆ˜ ìˆê²Œ í…ìŠ¤íŠ¸ ë°”ê¿”ë‘ê¸°
            $("#add_button").text("ì¶”ê°€");
        } else {
            // ì•„ë‹ˆë©´(ëˆˆì— ë³´ì´ì§€ ì•Šìœ¼ë©´) post-boxë¥¼ í´ë¼
            $("#post-box-area").show();
            // ë‹¤ì‹œ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´, ë°•ìŠ¤ ë‹«ê¸°ë¥¼ í•  ìˆ˜ ìˆê²Œ í…ìŠ¤íŠ¸ ë°”ê¿”ë‘ê¸°
            $("#add_button").text("ë‹«ê¸°");
        }
    }

    function delete_list() {
        // id ê°’ delete-post-boxì˜ display ê°’ì´ block ì´ë©´(= ëˆˆì— ë³´ì´ë©´)
        if ($("#delete-post-box-area").css("display") == "flex") {
            // delete-post-boxë¥¼ ê°€ë¦¬ê³ 
            $("#delete-post-box-area").hide();
            // ë‹¤ì‹œ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´, ë°•ìŠ¤ ì—´ê¸°ë¥¼ í•  ìˆ˜ ìˆê²Œ í…ìŠ¤íŠ¸ ë°”ê¿”ë‘ê¸°
            $("#delete_button").text("ì‚­ì œ");
        } else {
            // ì•„ë‹ˆë©´(ëˆˆì— ë³´ì´ì§€ ì•Šìœ¼ë©´) post-boxë¥¼ í´ë¼
            $("#delete-post-box-area").show();
            // ë‹¤ì‹œ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´, ë°•ìŠ¤ ë‹«ê¸°ë¥¼ í•  ìˆ˜ ìˆê²Œ í…ìŠ¤íŠ¸ ë°”ê¿”ë‘ê¸°
            $("#delete_button").text("ë‹«ê¸°");
        }
    }

    function postList() {
        let user = "{{ user['name'] }}"
        let name = $("#post-name").val();
        let price = $("#post-price").val();
        let rank = $("#post-rank").val();
        let url = $("#post-url").val();
        let comment = $("#post-comment").val();

        if (name === '') return alert('ì œí’ˆì˜ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
        if (price === '') return alert('ì œí’ˆì˜ ê°€ê²©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
        if (isNaN(price)) return alert('ì œí’ˆì˜ ê°€ê²©ì„ ìˆ«ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”')
        if (rank === '') return alert('ì œí’ˆì˜ ìˆœìœ„ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”')
        if (isNaN(price)) return alert('ì œí’ˆì˜ ìˆœìœ„ë¥¼ ìˆ«ìë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”')
        if (url === '') return alert('urlì„ ì…ë ¥í•´ì£¼ì„¸ìš”')
        if (!/(http(s)?:\/\/)([a-z0-9\w]+\.*)+[a-z0-9]{2,4}/gi.test(url)) return alert('urlì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”')
        if (comment === '') return alert('commentë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”')

        // 2. memo_listì— POST ë°©ì‹ìœ¼ë¡œ ë©”ëª¨ ìƒì„± ìš”ì²­í•˜ê¸°
        $.ajax({
            type: "POST", // POST ë°©ì‹ìœ¼ë¡œ ìš”ì²­í•˜ê² ë‹¤.
            url: "/memo_list", // /memo_listë¼ëŠ” urlì— ìš”ì²­í•˜ê² ë‹¤.
            data: {
                user_give: user,
                name_give: name,
                price_give: price,
                rank_give: rank,
                url_give: url,
                comment_give: comment
            }, // ë°ì´í„°ë¥¼ ì£¼ëŠ” ë°©ë²•
            success: function (response) { // ì„±ê³µí•˜ë©´
                if (response["result"] == "success") {
                    //alert("í¬ìŠ¤íŒ… ì„±ê³µ!");
                    // 3. ì„±ê³µ ì‹œ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨í•˜ê¸°
                    window.location.reload();
                } else {
                    alert("ë™ì¼í•œ ì´ë¦„ì˜ ì œí’ˆì´ ë¦¬ìŠ¤íŠ¸ì— ì´ë¯¸ ì¡´ì¬í•˜ê±°ë‚˜ ì„œë²„ì— ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤!");
                }
            }
        })
    }

    function showList() {
        let user = "{{ user['name'] }}"

        $.ajax({
            type: "GET",
            url: "/memo_list",
            data: {user_give: user},
            success: function (response) {
                let wish_list = response["wish_list"];
                console.log(wish_list);
                for (let i = 0; i < wish_list.length; i++) {
                    makeCard(wish_list[i]["name"],
                        wish_list[i]["price"],
                        wish_list[i]["comment"],
                        wish_list[i]["rank"],
                        wish_list[i]["image"]);
                }
            }
        })
    }

    function makeCard(name, price, comment, rank, image) {
        if (rank == 0) {
            let tempHtml = `<div class="card">
                            <img src="${image}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">${name}</h5>
                                <div class="rank">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                </div>
                                <p class="card-text">${price}ì›</p>
                                <p class="card-text">${comment}</p>
                            </div>
                            <div class="card-body">
                                <button onclick="good_button()" type="button" class="btn btn-light">good</button>
                                <button onclick="bad_button()" type="button" class="btn btn-light">bad</button>
                            </div>
                        </div>`;
            $("#card-area").append(tempHtml);
        } else if (rank == 0.5) {
            let tempHtml = `<div class="card">
                            <img src="${image}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">${name}</h5>
                                <div class="rank">
                                   <img class="star" src="../static/half-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                </div>
                                <p class="card-text">${price}ì›</p>
                                <p class="card-text">${comment}</p>
                            </div>
                            <div class="card-body">
                                <button onclick="good_button()" type="button" class="btn btn-light">good</button>
                                <button onclick="bad_button()" type="button" class="btn btn-light">bad</button>
                            </div>
                        </div>`;
            $("#card-area").append(tempHtml);
        } else if (rank == 1) {
            let tempHtml = `<div class="card">
                            <img src="${image}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">${name}</h5>
                                <div class="rank">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                </div>
                                <p class="card-text">${price}ì›</p>
                                <p class="card-text">${comment}</p>
                            </div>
                            <div class="card-body">
                                <button onclick="good_button()" type="button" class="btn btn-light">good</button>
                                <button onclick="bad_button()" type="button" class="btn btn-light">bad</button>
                            </div>
                        </div>`;
            $("#card-area").append(tempHtml);
        } else if (rank == 1.5) {
            let tempHtml = `<div class="card">
                            <img src="${image}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">${name}</h5>
                                <div class="rank">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/half-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                </div>
                                <p class="card-text">${price}ì›</p>
                                <p class="card-text">${comment}</p>
                            </div>
                            <div class="card-body">
                                <button onclick="good_button()" type="button" class="btn btn-light">good</button>
                                <button onclick="bad_button()" type="button" class="btn btn-light">bad</button>
                            </div>
                        </div>`;
            $("#card-area").append(tempHtml);
        } else if (rank == 2) {
            let tempHtml = `<div class="card">
                            <img src="${image}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">${name}</h5>
                                <div class="rank">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                </div>
                                <p class="card-text">${price}ì›</p>
                                <p class="card-text">${comment}</p>
                            </div>
                            <div class="card-body">
                                <button onclick="good_button()" type="button" class="btn btn-light">good</button>
                                <button onclick="bad_button()" type="button" class="btn btn-light">bad</button>
                            </div>
                        </div>`;
            $("#card-area").append(tempHtml);
        } else if (rank == 2.5) {
            let tempHtml = `<div class="card">
                            <img src="${image}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">${name}</h5>
                                <div class="rank">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/half-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                </div>
                                <p class="card-text">${price}ì›</p>
                                <p class="card-text">${comment}</p>
                            </div>
                            <div class="card-body">
                                <button onclick="good_button()" type="button" class="btn btn-light">good</button>
                                <button onclick="bad_button()" type="button" class="btn btn-light">bad</button>
                            </div>
                        </div>`;
            $("#card-area").append(tempHtml);
        } else if (rank == 3) {
            let tempHtml = `<div class="card">
                            <img src="${image}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">${name}</h5>
                                <div class="rank">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                </div>
                                <p class="card-text">${price}ì›</p>
                                <p class="card-text">${comment}</p>
                            </div>
                            <div class="card-body">
                                <button onclick="good_button()" type="button" class="btn btn-light">good</button>
                                <button onclick="bad_button()" type="button" class="btn btn-light">bad</button>
                            </div>
                        </div>`;
            $("#card-area").append(tempHtml);
        } else if (rank == 3.5) {
            let tempHtml = `<div class="card">
                            <img src="${image}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">${name}</h5>
                                <div class="rank">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/half-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                </div>
                                <p class="card-text">${price}ì›</p>
                                <p class="card-text">${comment}</p>
                            </div>
                            <div class="card-body">
                                <button onclick="good_button()" type="button" class="btn btn-light">good</button>
                                <button onclick="bad_button()" type="button" class="btn btn-light">bad</button>
                            </div>
                        </div>`;
            $("#card-area").append(tempHtml);
        } else if (rank == 4) {
            let tempHtml = `<div class="card">
                            <img src="${image}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">${name}</h5>
                                <div class="rank">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/empty-star.png" alt="">
                                </div>
                                <p class="card-text">${price}ì›</p>
                                <p class="card-text">${comment}</p>
                            </div>
                            <div class="card-body">
                                <button onclick="good_button()" type="button" class="btn btn-light">good</button>
                                <button onclick="bad_button()" type="button" class="btn btn-light">bad</button>
                            </div>
                        </div>`;
            $("#card-area").append(tempHtml);
        } else if (rank == 4.5) {
            let tempHtml = `<div class="card">
                            <img src="${image}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">${name}</h5>
                                <div class="rank">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/half-star.png" alt="">
                                </div>
                                <p class="card-text">${price}ì›</p>
                                <p class="card-text">${comment}</p>
                            </div>
                            <div class="card-body">
                                <button onclick="good_button()" type="button" class="btn btn-light">good</button>
                                <button onclick="bad_button()" type="button" class="btn btn-light">bad</button>
                            </div>
                        </div>`;
            $("#card-area").append(tempHtml);
        } else if (rank == 5) {
            let tempHtml = `<div class="card">
                            <img src="${image}" class="card-img-top" alt="...">
                            <div class="card-body">
                                <h5 class="card-title">${name}</h5>
                                <div class="rank">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                   <img class="star" src="../static/full-star.png" alt="">
                                </div>
                                <p class="card-text">${price}ì›</p>
                                <p class="card-text">${comment}</p>
                            </div>
                            <div class="card-body">
                                <button onclick="good_button()"type="button" class="btn btn-light">good</button>
                                <button onclick="bad_button()" type="button" class="btn btn-light">bad</button>
                            </div>
                        </div>`;
            $("#card-area").append(tempHtml);
        }
    }

    function removeList() {
        let user = "{{ user['name'] }}"
        let name = $("#delete-post-name").val();

        $.ajax({
            type: "POST",
            url: "/edit_object_list",
            data: {
                user_give: user,
                name_give: name
            },
            success: function (response) {
                console.log(response)
                if (response['result'] !== 'success') {
                    alert(response['msg'])
                } else {
                    alert('ì‚­ì œ ì™„ë£Œ')
                    location.reload()
                }
            }
        })
    }

    function good_button() {
        let user = "{{ user['name'] }}"
        let name = $(".card-title").val();

        $.ajax({
            type: "POST",
            url: "/plus_rank",
            data: {
                user_give: user,
                name_give: name
            },
            success: function (response) {
                console.log(response)
                if (response['result'] !== 'success') {
                    alert(response['msg'])
                } else {
                    alert(response['msg'])
                    location.reload()
                }
            }
        })
    }

    function bad_button() {
        let user = "{{ user['name'] }}"
        let name = $(".card-title").val();

        $.ajax({
            type: "POST",
            url: "/minus_rank",
            data: {
                user_give: user,
                name_give: name
            },
            success: function (response) {
                console.log(response)
                if (response['result'] !== 'success') {
                    alert(response['msg'])
                } else {
                    alert('ìˆ˜ì • ì™„ë£Œ')
                    location.reload()
                }
            }
        })
    }

</script>
{% endblock %}